
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en" xml:lang="en"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="eduComponents">
  
  <body>

    <div metal:fill-slot="main">
      <div metal:define-macro="main">

        <div metal:use-macro="here/document_actions/macros/document_actions">
            Document actions (print, sendto etc)
        </div>
    
        <h1 class="documentFirstHeading" tal:content="here/title_or_id">
          Title or id
        </h1>

        <div metal:use-macro="here/document_byline/macros/byline">
          Get the byline - contains details about author and modification date.
        </div>

        <div class="documentDescription" tal:content="here/Description">
            Description
        </div>

<!--
        <div class="visualClear"></div>
    
        <h2 i18n:translate="label_lecture_descr">Lecture Description</h2>
-->

        <fieldset style="float: right; margin-left: 0.5em; margin-top: 0;"
            tal:define="resources here/getAvailableResources"
            tal:condition="resources">

          <legend i18n:translate="label_resources_legend">Available resources</legend>

          <ul style="list-style-type: none; list-style-image: none; margin-left: 0;">
            <tal:resources repeat="resource resources">
              <li tal:define="resourceTitle resource/title;
                              resourceURL   resource/url;
                              resourceIcon  python: resource['icon'] or 'document_icon.gif';"
              >

                <img src="" alt=""
                    tal:condition="resourceIcon"
                    tal:attributes="src string:${portal_url}/${resourceIcon}"/>

                <a href="" 
                   class="link-plain" 
                   title=""
                   tal:attributes="href string:${resourceURL};" 
                   tal:content="resourceTitle">
                  Link to the resource
                </a>

              </li>
            </tal:resources>
          </ul>
        </fieldset>

        <table class="vertical listing">
          <tr tal:condition ="here/joinURL">
            <th i18n:translate="label_registration">Registration</th>
            <td>
              <a href=""
                 class="link-plain" 
                 tal:attributes="href here/getJoinURL;"
                 i18n:translate="label_register">
                Click here to register for this lecture
              </a>
            </td>
          </tr>

	  <tr tal:condition="here/getCourseType">
	    <th i18n:translate="label_course_type">Course type</th>
	    <td tal:content="here/getCourseType"></td>
	  </tr>

          <tr tal:define="instructors here/getInstructors"
	      tal:condition="instructors">
            <th tal:condition="python: len(instructors) == 1" i18n:translate="label_instructor">Instructor</th>
	    <th tal:condition="python: len(instructors)  > 1" i18n:translate="label_instructors">Instructors</th>
	    <td>
	      <tal:loop tal:repeat="userid python: instructors">
		<tal:if condition="userid">
		  <a href="#"
		    tal:attributes="href python: mtool.getHomeUrl(userid)"
		    tal:content="python: mtool.getMemberInfo(userid)
		    and mtool.getMemberInfo(userid)['fullname']
		    or userid">
		    The instructors' fullnames or user IDs
		  </a><span tal:condition="not: repeat/userid/end"
		    tal:replace="string:, "/>
		</tal:if>
	      </tal:loop>
	    </td>

          </tr>

          <tr>
            <th i18n:translate="label_time">Time</th>
            <td tal:define="weekday here/getStartDateWeekday;
                            timePeriod here/getTimePeriod">
              <span tal:condition="weekday" tal:omit-tag="">
                <span tal:omit-tag="" i18n:translate="" tal:content="weekday"/>,
              </span>
	      <span tal:condition="not: here/getRecurrence" tal:omit-tag="">
		<span tal:omit-tag=""
		  tal:content="python: here.toLocalizedTime(here.getStartDate())"/>,
	      </span>
	      <span tal:omit-tag=""
		tal:condition="timePeriod"
		tal:content="timePeriod"/>
            </td>
          </tr>

	  <tr tal:condition="python: here.getRecurrence()">
	    <th i18n:translate="label_recurrence">Recurrence</th>
	    <td>
	      <span i18n:translate="recurrence_text">
		<span i18n:name="recurrence" tal:content="python:
		  here.getRecurrenceDisplayList().getValue(here.getRecurrence())"/>
		from
		<span i18n:name="start_date" tal:content="python:
		  here.toLocalizedTime(here.getStartDate())"/>
		until
		<span i18n:name="end_date"
		  tal:content="python: here.toLocalizedTime(here.getEndDate())"/>
	      </span>
	    </td>
	  </tr>

          <tr tal:define="datetime python: here.firstSession"
              tal:condition="datetime">
            <th i18n:translate="label_first_session">First session</th>
            <td> 
              <span tal:condition="python: datetime.hour() == 0 and datetime.minute() == 0"
                tal:content="python: here.toLocalizedTime(here.firstSession, False)"/>
              <span tal:condition="python: datetime.hour() != 0 or datetime.minute() != 0"
                tal:content="python: here.toLocalizedTime(here.firstSession, True)"/>
            </td>
          </tr>
          <tr>
            <th i18n:translate="label_location">Location</th>
            <td>
              <span 
                tal:condition="here/getLocation"
                tal:replace="here/getLocation"/>
            </td>
          </tr>

	  <tr tal:condition="here/getCourseLanguage">
	    <th i18n:translate="label_course_language">Language of instruction</th>
	    <td i18n:domain="plone" i18n:translate=""
	      tal:content="python: dict(here.availableLanguages())[here.getCourseLanguage()]"></td>
	  </tr>

	  <tr tal:condition="here/getCredits">
	    <th i18n:translate="label_credits">Credits</th>
	    <td tal:content="here/getCredits"></td>
	  </tr>

	  <tr tal:condition="here/getMaxParticipants">
	    <th i18n:translate="label_max_participants">Enrollment limit</th>
	    <td tal:content="here/getMaxParticipants"></td>
	  </tr>

          <tr tal:condition="here/getDirectoryEntry">
            <th i18n:translate="label_directory">Directory</th>
            <td>
              <a href=""
                 class="link-plain"  
                 tal:attributes="href here/getDirectoryEntry"
                 i18n:translate="help_directory_entry">
                Link to the directory entry for this lecture
              </a>
            </td>
          </tr>
        </table>


        <div class="visualClear"/>

        <div tal:replace="structure here/getText"/>

        <div class="visualClear"/>

	<div tal:condition="here/getPrereq">
	  <h2 i18n:translate="label_prereq">Prerequisites</h2>
	  <div tal:replace="structure here/getPrereq"/>
	</div>

	<div tal:condition="here/getTarget">
	  <h2 i18n:translate="label_target">Target group</h2>
	  <div tal:replace="structure here/getTarget"/>
	</div>

      </div>
    </div>

  </body>
</html>
<!-- Keep this comment at the end of the file
Local variables:
mode:xml
sgml-local-catalogs:("/usr/local/lib/sgml/XHTML11.cat")
sgml-validate-command:"xmllint \\-\\-valid \\-\\-noout %s %s"
sgml-indent-step:2
sgml-indent-data:t
fill-column:79
End:
-->
